# Simulation configuration for demo Flask app
service:
  name: demo-pricing-api
  port: 5000

simulation:
  endpoints:
    - name: quote
      method: POST
      path: /quote
      fixtures_dir: fixtures/quote
    - name: health
      method: GET
      path: /health
    - name: user
      method: GET
      path: /user/{id}
    - name: products
      method: GET
      path: /products

replay:
  mode: replay_only  # or auto_record
  block_writes: true

# Fields to redact from captures
redaction:
  jsonpaths:
    - "$.user.email"
    - "$.user.password"
    - "$.*.credit_card"
    - "$.*.ssn"

# Fields to ignore when comparing responses
ignore:
  jsonpaths:
    - "$.request_id"
    - "$.trace_id"
    - "$.timestamp"
    - "$.quoted_at"

# Comparison tolerances
tolerances:
  money_paths:
    - "$.total"
    - "$.subtotal"
    - "$.tax"
    - "$.*.line_total"
  money_abs: 0.01

  percentage_paths:
    - "$.tax_rate"
  percentage_abs: 0.001
